{"ast":null,"code":"import dayjs from 'dayjs';\nexport function appointmentInPast(appointmentData) {\n  const now = dayjs();\n  return dayjs(appointmentData.dateTime) < now;\n}\nexport function getAppointmentColor(appointmentData, userId) {\n  const taken = !!appointmentData.userId;\n\n  if (taken || appointmentInPast(appointmentData)) {\n    const textColor = 'black';\n    const bgColor = appointmentData.userId === userId ? 'white' : 'gray.300';\n    return [textColor, bgColor];\n  }\n\n  const textColor = 'white';\n\n  switch (appointmentData.treatmentName.toLowerCase()) {\n    case 'massage':\n      return [textColor, 'purple.700'];\n\n    case 'scrub':\n      return [textColor, 'blue.700'];\n\n    case 'facial':\n      return [textColor, 'green.700'];\n\n    default:\n      return [textColor, 'black'];\n  }\n}\nexport function getAvailableAppointments(appointments, user) {\n  // clone so as not to mutate argument directly\n  const filteredAppointments = { ...appointments\n  }; // only keep appointments that are open (or taken by the logged-in user) and are not in the past)\n\n  Object.keys(filteredAppointments).forEach(date => {\n    filteredAppointments[date] = filteredAppointments[date].filter(appointment => (!appointment.userId || appointment.userId === (user === null || user === void 0 ? void 0 : user.id)) && !appointmentInPast(appointment));\n  });\n  return filteredAppointments;\n}","map":{"version":3,"sources":["/Users/viniciusalexandre/Documents/development/udemy-REACT-QUERY/base-lazy-days/client/src/components/appointments/utils.ts"],"names":["dayjs","appointmentInPast","appointmentData","now","dateTime","getAppointmentColor","userId","taken","textColor","bgColor","treatmentName","toLowerCase","getAvailableAppointments","appointments","user","filteredAppointments","Object","keys","forEach","date","filter","appointment","id"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAQA,OAAO,SAASC,iBAAT,CAA2BC,eAA3B,EAAkE;AACvE,QAAMC,GAAG,GAAGH,KAAK,EAAjB;AACA,SAAOA,KAAK,CAACE,eAAe,CAACE,QAAjB,CAAL,GAAkCD,GAAzC;AACD;AAED,OAAO,SAASE,mBAAT,CACLH,eADK,EAELI,MAFK,EAGa;AAClB,QAAMC,KAAK,GAAG,CAAC,CAACL,eAAe,CAACI,MAAhC;;AAEA,MAAIC,KAAK,IAAIN,iBAAiB,CAACC,eAAD,CAA9B,EAAiD;AAC/C,UAAMM,SAAS,GAAG,OAAlB;AACA,UAAMC,OAAO,GAAGP,eAAe,CAACI,MAAhB,KAA2BA,MAA3B,GAAoC,OAApC,GAA8C,UAA9D;AACA,WAAO,CAACE,SAAD,EAAYC,OAAZ,CAAP;AACD;;AACD,QAAMD,SAAS,GAAG,OAAlB;;AAEA,UAAQN,eAAe,CAACQ,aAAhB,CAA8BC,WAA9B,EAAR;AACE,SAAK,SAAL;AACE,aAAO,CAACH,SAAD,EAAY,YAAZ,CAAP;;AACF,SAAK,OAAL;AACE,aAAO,CAACA,SAAD,EAAY,UAAZ,CAAP;;AACF,SAAK,QAAL;AACE,aAAO,CAACA,SAAD,EAAY,WAAZ,CAAP;;AACF;AACE,aAAO,CAACA,SAAD,EAAY,OAAZ,CAAP;AARJ;AAUD;AAED,OAAO,SAASI,wBAAT,CACLC,YADK,EAELC,IAFK,EAGe;AACpB;AACA,QAAMC,oBAAoB,GAAG,EAAE,GAAGF;AAAL,GAA7B,CAFoB,CAIpB;;AACAG,EAAAA,MAAM,CAACC,IAAP,CAAYF,oBAAZ,EAAkCG,OAAlC,CAA2CC,IAAD,IAAU;AAClDJ,IAAAA,oBAAoB,CAACI,IAAD,CAApB,GAA6BJ,oBAAoB,CAACI,IAAD,CAApB,CAA2BC,MAA3B,CAC1BC,WAAD,IACE,CAAC,CAACA,WAAW,CAACf,MAAb,IAAuBe,WAAW,CAACf,MAAZ,MAAuBQ,IAAvB,aAAuBA,IAAvB,uBAAuBA,IAAI,CAAEQ,EAA7B,CAAxB,KACA,CAACrB,iBAAiB,CAACoB,WAAD,CAHO,CAA7B;AAKD,GAND;AAQA,SAAON,oBAAP;AACD","sourcesContent":["import dayjs from 'dayjs';\n\nimport type {\n  Appointment,\n  AppointmentDateMap,\n  User,\n} from '../../../../shared/types';\n\nexport function appointmentInPast(appointmentData: Appointment): boolean {\n  const now = dayjs();\n  return dayjs(appointmentData.dateTime) < now;\n}\n\nexport function getAppointmentColor(\n  appointmentData: Appointment,\n  userId: number | undefined,\n): [string, string] {\n  const taken = !!appointmentData.userId;\n\n  if (taken || appointmentInPast(appointmentData)) {\n    const textColor = 'black';\n    const bgColor = appointmentData.userId === userId ? 'white' : 'gray.300';\n    return [textColor, bgColor];\n  }\n  const textColor = 'white';\n\n  switch (appointmentData.treatmentName.toLowerCase()) {\n    case 'massage':\n      return [textColor, 'purple.700'];\n    case 'scrub':\n      return [textColor, 'blue.700'];\n    case 'facial':\n      return [textColor, 'green.700'];\n    default:\n      return [textColor, 'black'];\n  }\n}\n\nexport function getAvailableAppointments(\n  appointments: AppointmentDateMap,\n  user: User | null,\n): AppointmentDateMap {\n  // clone so as not to mutate argument directly\n  const filteredAppointments = { ...appointments };\n\n  // only keep appointments that are open (or taken by the logged-in user) and are not in the past)\n  Object.keys(filteredAppointments).forEach((date) => {\n    filteredAppointments[date] = filteredAppointments[date].filter(\n      (appointment: Appointment) =>\n        (!appointment.userId || appointment.userId === user?.id) &&\n        !appointmentInPast(appointment),\n    );\n  });\n\n  return filteredAppointments;\n}\n"]},"metadata":{},"sourceType":"module"}